import{n as ce,a as D,t as R,d as Te}from"../chunks/D3Qdtv9p.js";import"../chunks/DaNf9ShL.js";import{ai as Ae,p as ae,au as H,b as y,m as z,a1 as F,av as me,c as o,s as c,r as i,t as L,d as ue,g as e,a as ne,f as Ce,aw as Le}from"../chunks/C6ydbY16.js";import{s as T,e as U}from"../chunks/BkgK5-VD.js";import{e as se,i as le}from"../chunks/BzpfBKZl.js";import{s as $,r as Ne,a as Fe,b as Re}from"../chunks/BhIJvgy9.js";import{b as Me}from"../chunks/lCpoP4XF.js";import{i as ie}from"../chunks/CCs625M-.js";import{b as Ge,a as ke,s as Ee}from"../chunks/BC0MeD4I.js";import{c as xe,o as je}from"../chunks/B8b-IeSS.js";import{i as Z}from"../chunks/C5nimzwO.js";import{s as _e}from"../chunks/DN4ZhoKx.js";import{t as ye,a as Be,r as Ke,l as Oe,b as He,f as Ie}from"../chunks/DnrS32X9.js";import{p as W}from"../chunks/BYzgNHyP.js";import{w as De}from"../chunks/BfQ96OKu.js";import{s as we}from"../chunks/ByLpTD0e.js";import{s as We}from"../chunks/Bfc47y5P.js";function Ue(a,r){var s;var d=(s=a.$$events)==null?void 0:s[r.type],l=Ae(d)?d.slice():d==null?[]:[d];for(var n of l)n.call(this,r)}var Ve=ce('<circle fill="transparent" stroke-width="2" stroke-dasharray="4,2"></circle>'),Ye=ce('<circle r="5" fill="#10b981" stroke="#ffffff" stroke-width="1"></circle>'),Je=ce('<g class="node-container svelte-x0ef6u" role="button" tabindex="0"><g><!><circle stroke="#ffffff" stroke-width="2"></circle><text text-anchor="middle" dy="0.3em" fill="#ffffff" font-size="10" font-weight="bold" class="svelte-x0ef6u"> </text><!></g></g>');function Qe(a,r){ae(r,!1);const d=z(),l=z(),n=z();let s=W(r,"node",8),t=W(r,"isSelected",8,!1);const u=xe();function v(){u("click")}function w(C){switch(C){case"local":return"#8b5cf6";case"regional":return"#6d28d9";case"global":return"#4a1d96";case"device":return"#a78bfa";default:return"#c4b5fd"}}function m(C){switch(C){case"local":return 20;case"regional":return 25;case"global":return 30;case"device":return 15;default:return 18}}H(()=>F(s()),()=>{y(d,w(s().type))}),H(()=>F(s()),()=>{y(l,m(s().type))}),H(()=>F(t()),()=>{y(n,t()?"#4a1d96":"transparent")}),me(),ie();var g=Je(),f=o(g);let x;var p=o(f);{var h=C=>{var k=Ve();L(()=>{$(k,"r",e(l)+4),$(k,"stroke",e(n))}),ye(1,k,()=>Be,()=>({duration:200,start:.8})),D(C,k)};Z(p,C=>{t()&&C(h)})}var b=c(p),S=c(b),N=o(S,!0);i(S);var E=c(S);{var q=C=>{var k=Ye();L(()=>{$(k,"cx",e(l)-5),$(k,"cy",-e(l)+5)}),D(C,k)};Z(E,C=>{s().dataSovereignty&&C(q)})}i(f),i(g),L(C=>{$(g,"transform",`translate(${s().x}, ${s().y})`),x=_e(f,0,"node svelte-x0ef6u",null,x,C),$(b,"r",e(l)),$(b,"fill",e(d)),T(N,s().label)},[()=>({selected:t()})],ue),U("click",g,v),D(a,g),ne()}function ze(a){return Object.prototype.toString.call(a)==="[object Date]"}function Xe(a){return a}function $e(a){const r=a-1;return r*r*r+1}function Se(a,r){if(a===r||a!==a)return()=>a;const d=typeof a;if(d!==typeof r||Array.isArray(a)!==Array.isArray(r))throw new Error("Cannot interpolate values of different type");if(Array.isArray(a)){const l=r.map((n,s)=>Se(a[s],n));return n=>l.map(s=>s(n))}if(d==="object"){if(!a||!r)throw new Error("Object cannot be null");if(ze(a)&&ze(r)){const s=a.getTime(),u=r.getTime()-s;return v=>new Date(s+v*u)}const l=Object.keys(r),n={};return l.forEach(s=>{n[s]=Se(a[s],r[s])}),s=>{const t={};return l.forEach(u=>{t[u]=n[u](s)}),t}}if(d==="number"){const l=r-a;return n=>a+n*l}return()=>r}function Ze(a,r={}){const d=De(a);let l,n=a;function s(t,u){if(n=t,a==null)return d.set(a=t),Promise.resolve();let v=l,w=!1,{delay:m=0,duration:g=400,easing:f=Xe,interpolate:x=Se}={...r,...u};if(g===0)return v&&(v.abort(),v=null),d.set(a=n),Promise.resolve();const p=Ke.now()+m;let h;return l=Oe(b=>{if(b<p)return!0;w||(h=x(a,t),typeof g=="function"&&(g=g(a,t)),w=!0),v&&(v.abort(),v=null);const S=b-p;return S>g?(d.set(a=t),!1):(d.set(a=h(f(S/g))),!0)}),l.promise}return{set:s,update:(t,u)=>s(t(n,a),u),subscribe:d.subscribe}}var et=ce('<circle fill="transparent" stroke="#4a1d96" stroke-width="1.5" stroke-dasharray="2,2"></circle>'),tt=ce('<circle fill="transparent" stroke="#10b981" stroke-width="1" opacity="0.7"></circle>'),st=ce('<g><!><rect rx="2" stroke="#ffffff" stroke-width="1"></rect><!><text text-anchor="middle" fill="#ffffff" font-weight="bold" dy="0.35em" class="svelte-18hi5g3"> </text></g>');function at(a,r){ae(r,!1);const[d,l]=Ee(),n=()=>ke(e(u),"$progress",d),s=z(),t=z(),u=z(),v=z(),w=z(),m=z(),g=z(),f=z(),x=z();let p=W(r,"packet",8),h=W(r,"sovereigntyMode",8,!1),b=W(r,"isSelected",8,!1);const S=xe();function N(){S("click")}function E(B){switch(B){case"Health":return"#ef4444";case"Climate":return"#10b981";case"Education":return"#3b82f6";case"Cultural":return"#f59e0b";default:return"#8b5cf6"}}H(()=>F(p()),()=>{y(s,p().path.source)}),H(()=>F(p()),()=>{y(t,p().path.target)}),H(()=>$e,()=>{Ge(y(u,Ze(0,{duration:1e3,easing:$e})),"$progress",d)}),H(()=>(e(u),F(p())),()=>{e(u).set(p().progress)}),H(()=>(e(s),e(t),n()),()=>{y(v,e(s).x+(e(t).x-e(s).x)*n())}),H(()=>(e(s),e(t),n()),()=>{y(w,e(s).y+(e(t).y-e(s).y)*n())}),H(()=>F(p()),()=>{y(m,E(p().data.type))}),H(()=>F(p()),()=>{y(g,5+p().data.size/20)}),H(()=>(n(),F(p()),F(h())),()=>{y(f,n()>.5&&p().data.sovereignty&&h())}),H(()=>(F(p()),e(f)),()=>{y(x,p().verified||e(f))}),me(),ie();var q=st();let C;var k=o(q);{var j=B=>{var A=et();L(()=>$(A,"r",e(g)*1.8)),D(B,A)};Z(k,B=>{b()&&B(j)})}var P=c(k);let K;var V=c(P);{var Y=B=>{var A=tt();L(()=>$(A,"r",e(g)*1.2)),D(B,A)};Z(V,B=>{e(x)&&h()&&B(Y)})}var Q=c(V),X=o(Q,!0);i(Q),i(q),L((B,A,te)=>{$(q,"transform",`translate(${e(v)}, ${e(w)})`),C=_e(q,0,"packet svelte-18hi5g3",null,C,B),$(P,"x",-e(g)/2),$(P,"y",-e(g)/2),$(P,"width",e(g)),$(P,"height",e(g)),$(P,"fill",e(m)),K=_e(P,0,"svelte-18hi5g3",null,K,A),$(Q,"font-size",e(g)*.4),T(X,te)},[()=>({selected:b()}),()=>({verified:e(x)}),()=>p().data.type.charAt(0)],ue),U("click",q,N),D(a,q),ne(),l()}var nt=ce('<circle r="5" fill="#10b981" stroke="#ffffff" stroke-width="1"></circle>'),it=ce('<path fill="none" opacity="0.7" class="svelte-1c3pl4m"></path><!>',1);function ot(a,r){ae(r,!1);const d=z(),l=z(),n=z();let s=W(r,"connection",8);function t(f){const x=f.target.x-f.source.x,p=f.target.y-f.source.y,h=Math.sqrt(x*x+p*p),b=f.bandwidth?1+Math.min(3,f.bandwidth/30):1.5;return{d:`M${f.source.x},${f.source.y} A${h},${h} 0 0,1 ${f.target.x},${f.target.y}`,strokeWidth:b}}function u(f){switch(f){case"main":return"#6d28d9";case"backup":return"#a78bfa";case"regional":return"#8b5cf6";case"global":return"#4a1d96";default:return"#c4b5fd"}}H(()=>F(s()),()=>{y(d,t(s()))}),H(()=>F(s()),()=>{y(l,u(s().type))}),H(()=>F(s()),()=>{y(n,s().type==="backup"?"5,5":"none")}),me(),ie();var v=it(),w=Ce(v),m=c(w);{var g=f=>{var x=nt();L(()=>{$(x,"cx",s().source.x+(s().target.x-s().source.x)*.5),$(x,"cy",s().source.y+(s().target.y-s().source.y)*.5)}),D(f,x)};Z(m,f=>{s().sovereigntyCheck&&f(g)})}L(()=>{$(w,"d",e(d).d),$(w,"stroke",e(l)),$(w,"stroke-width",e(d).strokeWidth),$(w,"stroke-dasharray",e(n))}),D(a,v),ne()}var rt=R('<button class="btn pause svelte-d6vlqg">Pause</button>'),lt=R('<button class="btn start svelte-d6vlqg">Start</button>'),ct=R('<div class="control-panel svelte-d6vlqg"><h3 class="svelte-d6vlqg">Simulation Controls</h3> <div class="control-buttons svelte-d6vlqg"><!> <button class="btn reset svelte-d6vlqg">Reset</button></div> <div class="control-sliders svelte-d6vlqg"><label class="svelte-d6vlqg">Simulation Speed <input type="range" min="1" max="10" step="1" class="svelte-d6vlqg"> <span class="value svelte-d6vlqg"> </span></label></div> <div class="control-toggles"><label class="toggle svelte-d6vlqg"><span>Data Sovereignty Mode</span> <div class="toggle-switch svelte-d6vlqg"><input type="checkbox" class="svelte-d6vlqg"> <span class="slider svelte-d6vlqg"></span></div></label></div></div>');function vt(a,r){ae(r,!1);let d=W(r,"simulation",8);const l=xe();function n(k,j=null){l("control",{action:k,value:j})}function s(k){n("speed",parseInt(k.target.value))}function t(){n("sovereignty",!d().sovereigntyMode)}ie();var u=ct(),v=c(o(u),2),w=o(v);{var m=k=>{var j=rt();U("click",j,()=>n("pause")),D(k,j)},g=k=>{var j=lt();U("click",j,()=>n("start")),D(k,j)};Z(w,k=>{d().running?k(m):k(g,!1)})}var f=c(w,2);i(v);var x=c(v,2),p=o(x),h=c(o(p));Ne(h);var b=c(h,2),S=o(b);i(b),i(p),i(x);var N=c(x,2),E=o(N),q=c(o(E),2),C=o(q);Ne(C),Le(2),i(q),i(E),i(N),i(u),L(()=>{Fe(h,d().speed),T(S,`${d().speed??""}x`),Re(C,d().sovereigntyMode)}),U("click",f,()=>n("reset")),U("input",h,s),U("change",C,t),D(a,u),ne()}var dt=R('<div class="selected-node svelte-up3m2x"><h4 class="svelte-up3m2x"> </h4> <div class="info-grid svelte-up3m2x"><div class="info-label svelte-up3m2x">Type:</div> <div class="info-value svelte-up3m2x"> </div> <div class="info-label svelte-up3m2x">Location:</div> <div class="info-value svelte-up3m2x"> </div> <div class="info-label svelte-up3m2x">Data Sovereignty:</div> <div class="info-value svelte-up3m2x"> </div> <div class="info-label svelte-up3m2x">Connections:</div> <div class="info-value svelte-up3m2x"> </div></div></div>'),ut=R('<div class="no-selection svelte-up3m2x"><p>Click on a node to see detailed information</p></div>'),gt=R('<div class="info-panel svelte-up3m2x"><h3 class="svelte-up3m2x">Network Information</h3> <!> <div class="stats-section svelte-up3m2x"><h4 class="svelte-up3m2x">Simulation Statistics</h4> <div class="stat-item svelte-up3m2x"><div class="stat-label svelte-up3m2x">Active Data Packets:</div> <div class="stat-value svelte-up3m2x"> </div></div> <div class="stat-item svelte-up3m2x"><div class="stat-label svelte-up3m2x">Data Transfers:</div> <div class="stat-value svelte-up3m2x"> </div></div> <div class="stat-item svelte-up3m2x"><div class="stat-label svelte-up3m2x">Sovereignty Checks:</div> <div class="stat-value svelte-up3m2x"> </div></div> <div class="stat-item svelte-up3m2x"><div class="stat-label svelte-up3m2x">Network Efficiency:</div> <div class="stat-value svelte-up3m2x"> </div></div></div></div>');function ft(a,r){ae(r,!1);const d=z();let l=W(r,"selectedNode",8,null),n=W(r,"stats",24,()=>({})),s=W(r,"activePackets",8,0);function t(P){switch(P){case"local":return"Local Citizen Node";case"regional":return"Regional Digital Hub";case"global":return"Global Council Node";case"device":return"Community Device";default:return P}}H(()=>F(l()),()=>{var P;y(d,l()?{name:l().name,type:t(l().type),location:l().location,dataSovereignty:l().dataSovereignty?"Enabled":"Disabled",connections:((P=l().connections)==null?void 0:P.length)||0}:null)}),me(),ie();var u=gt(),v=c(o(u),2);{var w=P=>{var K=dt(),V=o(K),Y=o(V,!0);i(V);var Q=c(V,2),X=c(o(Q),2),B=o(X,!0);i(X);var A=c(X,4),te=o(A,!0);i(A);var oe=c(A,4),ge=o(oe,!0);i(oe);var re=c(oe,4),pe=o(re,!0);i(re),i(Q),i(K),L(()=>{T(Y,e(d).name),T(B,e(d).type),T(te,e(d).location),T(ge,e(d).dataSovereignty),T(pe,e(d).connections)}),D(P,K)},m=P=>{var K=ut();D(P,K)};Z(v,P=>{l()?P(w):P(m,!1)})}var g=c(v,2),f=c(o(g),2),x=c(o(f),2),p=o(x,!0);i(x),i(f);var h=c(f,2),b=c(o(h),2),S=o(b,!0);i(b),i(h);var N=c(h,2),E=c(o(N),2),q=o(E,!0);i(E),i(N);var C=c(N,2),k=c(o(C),2),j=o(k);i(k),i(C),i(g),i(u),L(()=>{T(p,s()),T(S,n().transfers||0),T(q,n().sovereigntyChecks||0),T(j,`${n().efficiency||0}%`)}),D(a,u),ne()}var mt=R("<option> </option>"),pt=R("<p> </p>"),ht=R('<div class="scenario-selector svelte-1xo36l3"><h3 class="svelte-1xo36l3">Network Scenarios</h3> <select class="svelte-1xo36l3"></select> <div class="scenario-description svelte-1xo36l3"><!></div></div>');function yt(a,r){ae(r,!1);let d=W(r,"scenarios",24,()=>[]);const l=xe();function n(m){const g=d().find(f=>f.id===m.target.value);l("change",g)}ie();var s=ht(),t=c(o(s),2);se(t,5,d,le,(m,g)=>{var f=mt(),x={},p=o(f,!0);i(f),L(()=>{x!==(x=e(g).id)&&(f.value=(f.__value=e(g).id)==null?"":e(g).id),T(p,e(g).name)}),D(m,f)}),i(t);var u=c(t,2),v=o(u);{var w=m=>{var g=pt(),f=o(g,!0);i(g),L(()=>T(f,d()[0].description)),D(m,g)};Z(v,m=>{d().length>0&&m(w)})}i(u),i(s),U("change",t,n),D(a,s),ne()}var xt=R('<div class="legend-item svelte-1g1vree"><div class="symbol node-symbol svelte-1g1vree"></div> <div class="label svelte-1g1vree"> </div></div>'),bt=R('<div class="legend-item svelte-1g1vree"><div class="symbol connection-symbol svelte-1g1vree"><svg width="30" height="6"><line x1="0" y1="3" x2="30" y2="3" stroke-width="2"></line></svg></div> <div class="label svelte-1g1vree"> </div></div>'),_t=R('<div class="legend-item svelte-1g1vree"><div class="symbol data-symbol svelte-1g1vree"></div> <div class="label svelte-1g1vree"> </div></div>'),wt=R('<div class="legend-item svelte-1g1vree"><div class="symbol indicator-symbol svelte-1g1vree"></div> <div class="label svelte-1g1vree"> </div></div>'),kt=R('<div class="network-legend svelte-1g1vree"><h3 class="svelte-1g1vree">Network Legend</h3> <div class="legend-section svelte-1g1vree"><h4 class="svelte-1g1vree">Node Types</h4> <div class="legend-items svelte-1g1vree"></div></div> <div class="legend-section svelte-1g1vree"><h4 class="svelte-1g1vree">Connection Types</h4> <div class="legend-items svelte-1g1vree"></div></div> <div class="legend-section svelte-1g1vree"><h4 class="svelte-1g1vree">Data Types</h4> <div class="legend-items svelte-1g1vree"></div></div> <div class="legend-section svelte-1g1vree"><h4 class="svelte-1g1vree">Indicators</h4> <div class="legend-items svelte-1g1vree"></div></div></div>');function St(a){const r=[{type:"local",label:"Local Citizen Node",color:"#8b5cf6"},{type:"regional",label:"Regional Digital Hub",color:"#6d28d9"},{type:"global",label:"Global Council Node",color:"#4a1d96"},{type:"device",label:"Community Device",color:"#a78bfa"}],d=[{type:"main",label:"Primary Connection",color:"#6d28d9",dash:"none"},{type:"backup",label:"Backup Connection",color:"#a78bfa",dash:"5,5"},{type:"regional",label:"Regional Link",color:"#8b5cf6",dash:"none"},{type:"global",label:"Global Link",color:"#4a1d96",dash:"none"}],l=[{type:"Health",label:"Health Data",color:"#ef4444"},{type:"Climate",label:"Climate Data",color:"#10b981"},{type:"Education",label:"Education Data",color:"#3b82f6"},{type:"Cultural",label:"Cultural Data",color:"#f59e0b"}],n=[{label:"Data Sovereignty Enabled",color:"#10b981"}];var s=kt(),t=c(o(s),2),u=c(o(t),2);se(u,5,()=>r,le,(p,h)=>{var b=xt(),S=o(b),N=c(S,2),E=o(N,!0);i(N),i(b),L(()=>{we(S,`background-color: ${e(h).color??""}`),T(E,e(h).label)}),D(p,b)}),i(u),i(t);var v=c(t,2),w=c(o(v),2);se(w,5,()=>d,le,(p,h)=>{var b=bt(),S=o(b),N=o(S),E=o(N);i(N),i(S);var q=c(S,2),C=o(q,!0);i(q),i(b),L(()=>{$(E,"stroke",e(h).color),$(E,"stroke-dasharray",e(h).dash),T(C,e(h).label)}),D(p,b)}),i(w),i(v);var m=c(v,2),g=c(o(m),2);se(g,5,()=>l,le,(p,h)=>{var b=_t(),S=o(b),N=c(S,2),E=o(N,!0);i(N),i(b),L(()=>{we(S,`background-color: ${e(h).color??""}`),T(E,e(h).label)}),D(p,b)}),i(g),i(m);var f=c(m,2),x=c(o(f),2);se(x,5,()=>n,le,(p,h)=>{var b=wt(),S=o(b),N=c(S,2),E=o(N,!0);i(N),i(b),L(()=>{we(S,`background-color: ${e(h).color??""}`),T(E,e(h).label)}),D(p,b)}),i(x),i(f),i(s),D(a,s)}function Ct(a,r,d,l){return!l||!a.data.sovereignty?!0:r.dataSovereignty||d.dataSovereignty}function Dt(a,r){return!r||!a.data.sovereignty?a:{...a,sovereigntyChecks:[...a.sovereigntyChecks,{timestamp:Date.now(),status:"verified"}],verified:!0}}function Nt(a,r){return r?a.data.sovereignty?a.sovereigntyChecks.length===0?"Awaiting sovereignty verification...":"Data sovereignty verified - transfer authorized":"Standard data transfer - no sovereignty protocols required":""}function Mt(a,r){if(!r)return 100;const d=a.length;if(d===0)return 95;const n=a.filter(s=>s.data.sovereignty).length/d;return Math.floor(99-n*4)}var zt=R('<div class="log-entry svelte-sx0xmm"><span class="timestamp svelte-sx0xmm"> </span> <span class="check-status svelte-sx0xmm"> </span></div>'),$t=R('<div class="verification-log svelte-sx0xmm"><h5 class="svelte-sx0xmm">Verification Log</h5> <!></div>'),Pt=R('<div class="sovereignty-display svelte-sx0xmm"><div class="header svelte-sx0xmm"><h4 class="svelte-sx0xmm">Data Sovereignty Protocol</h4> <div> </div></div> <div class="content svelte-sx0xmm"><div class="data-info svelte-sx0xmm"><div class="info-item svelte-sx0xmm"><span class="label svelte-sx0xmm">Data Type:</span> <span class="value"> </span></div> <div class="info-item svelte-sx0xmm"><span class="label svelte-sx0xmm">Source:</span> <span class="value"> </span></div> <div class="info-item svelte-sx0xmm"><span class="label svelte-sx0xmm">Destination:</span> <span class="value"> </span></div></div> <!> <div class="message svelte-sx0xmm"> </div></div></div>');function Tt(a,r){ae(r,!1);const d=z(),l=z(),n=z();let s=W(r,"active",8,!1),t=W(r,"packet",8,null);H(()=>(F(t()),F(s())),()=>{y(d,t()?Nt(t(),s()):"")}),H(()=>F(t()),()=>{var m,g;y(l,((g=(m=t())==null?void 0:m.data)==null?void 0:g.type)||"")}),H(()=>F(t()),()=>{var m;y(n,(m=t())!=null&&m.verified?"Verified":"Pending")}),me(),ie();var u=Te(),v=Ce(u);{var w=m=>{var g=Pt(),f=o(g),x=c(o(f),2);let p;var h=o(x,!0);i(x),i(f);var b=c(f,2),S=o(b),N=o(S),E=c(o(N),2),q=o(E,!0);i(E),i(N);var C=c(N,2),k=c(o(C),2),j=o(k,!0);i(k),i(C);var P=c(C,2),K=c(o(P),2),V=o(K,!0);i(K),i(P),i(S);var Y=c(S,2);{var Q=A=>{var te=$t(),oe=c(o(te),2);se(oe,1,()=>t().sovereigntyChecks,le,(ge,re,pe)=>{var fe=zt(),he=o(fe),_=o(he,!0);i(he);var M=c(he,2),I=o(M,!0);i(M),i(fe),L(G=>{T(_,G),T(I,e(re).status)},[()=>new Date(e(re).timestamp).toLocaleTimeString()],ue),ye(1,fe,()=>He,()=>({y:20,delay:pe*100})),D(ge,fe)}),i(te),D(A,te)};Z(Y,A=>{t().sovereigntyChecks.length>0&&A(Q)})}var X=c(Y,2),B=o(X,!0);i(X),i(b),i(g),L(A=>{p=_e(x,1,"status svelte-sx0xmm",null,p,A),T(h,e(n)),T(q,e(l)),T(j,t().source),T(V,t().destination),T(B,e(d))},[()=>({verified:t().verified})],ue),ye(1,g,()=>Ie),D(m,g)};Z(v,m=>{s()&&t()&&m(w)})}D(a,u),ne()}var Et=R(`<div class="modal-backdrop svelte-mxyvwx"><div class="modal-content svelte-mxyvwx"><div class="modal-header svelte-mxyvwx"><h2 class="svelte-mxyvwx">Data Flow Simulator Guide</h2> <button class="close-button svelte-mxyvwx">×</button></div> <div class="modal-body svelte-mxyvwx"><section class="svelte-mxyvwx"><h3 class="svelte-mxyvwx">About This Simulator</h3> <p class="svelte-mxyvwx">The Data Flow Simulator demonstrates how information travels through the Digital Commons Framework network while preserving community data sovereignty. This interactive visualization shows the movement of different data types between Local Citizen Nodes, Regional Hubs, and the Global Council.</p></section> <section class="svelte-mxyvwx"><h3 class="svelte-mxyvwx">Understanding the Network</h3> <p class="svelte-mxyvwx">The network consists of various node types:</p> <ul class="svelte-mxyvwx"><li class="svelte-mxyvwx"><strong>Local Citizen Nodes</strong>: Community-level governance of digital resources</li> <li class="svelte-mxyvwx"><strong>Regional Digital Hubs</strong>: Coordinate across multiple local nodes</li> <li class="svelte-mxyvwx"><strong>Global Council</strong>: Establishes framework-wide policies and standards</li></ul> <p class="svelte-mxyvwx">Nodes with a green indicator have data sovereignty protocols enabled, allowing them to verify and manage sensitive data transfers.</p></section> <section class="svelte-mxyvwx"><h3 class="svelte-mxyvwx">Data Sovereignty Mode</h3> <p class="svelte-mxyvwx">When Data Sovereignty Mode is enabled, data transfers are subject to verification at sovereignty checkpoints. This ensures communities maintain control over their data while allowing beneficial sharing.</p> <p class="svelte-mxyvwx">You'll notice that packets with sovereignty requirements will show a green verification effect at checkpoints, indicating the data transfer has been authorized according to community protocols.</p></section> <section class="svelte-mxyvwx"><h3 class="svelte-mxyvwx">Interacting with the Simulator</h3> <ul class="svelte-mxyvwx"><li class="svelte-mxyvwx">Click on nodes to view detailed information</li> <li class="svelte-mxyvwx">Click on data packets to see transfer details and sovereignty status</li> <li class="svelte-mxyvwx">Use the scenario selector to explore different network configurations</li> <li class="svelte-mxyvwx">Adjust simulation speed to control visualization pace</li> <li class="svelte-mxyvwx">Toggle Data Sovereignty Mode to see its impact on the network</li></ul></section> <section class="svelte-mxyvwx"><h3 class="svelte-mxyvwx">Exploring Scenarios</h3> <p class="svelte-mxyvwx">Try different scenarios to see how the Digital Commons Framework adapts to various contexts:</p> <ul class="svelte-mxyvwx"><li class="svelte-mxyvwx"><strong>Basic Framework</strong>: Core network structure</li> <li class="svelte-mxyvwx"><strong>Health Data Sharing</strong>: Prioritizes privacy for sensitive health information</li> <li class="svelte-mxyvwx"><strong>Cultural Knowledge</strong>: Demonstrates Indigenous data sovereignty</li> <li class="svelte-mxyvwx"><strong>Disaster Response</strong>: Shows adaptive connections during emergencies</li></ul></section></div> <div class="modal-footer svelte-mxyvwx"><button class="start-button svelte-mxyvwx">Start Exploring</button></div></div></div>`);function Ht(a,r){ae(r,!1);let d=W(r,"show",8,!1);const l=xe();function n(){l("close")}ie();var s=Te(),t=Ce(s);{var u=v=>{var w=Et(),m=o(w),g=o(m),f=c(o(g),2);i(g);var x=c(g,4),p=o(x);i(x),i(m),i(w),U("click",f,n),U("click",p,n),U("click",m,We(function(h){Ue.call(this,r,h)})),ye(1,m,()=>He,()=>({y:20,duration:300})),U("click",w,n),ye(1,w,()=>Ie,()=>({duration:200})),D(v,w)};Z(t,v=>{d()&&v(u)})}D(a,s),ne()}function It(){const a={running:!1,speed:5,sovereigntyMode:!0,stats:{transfers:0,sovereigntyChecks:0,efficiency:95,startTime:null},packetSpeed:3},{subscribe:r,set:d,update:l}=De(a);return{subscribe:r,start:()=>l(n=>({...n,running:!0})),pause:()=>l(n=>({...n,running:!1})),reset:()=>d(a),setSpeed:n=>l(s=>({...s,speed:n,packetSpeed:6-n*.3})),setSovereigntyMode:n=>l(s=>({...s,sovereigntyMode:n})),incrementTransfers:()=>l(n=>({...n,stats:{...n.stats,transfers:n.stats.transfers+1}})),incrementSovereigntyChecks:()=>l(n=>({...n,stats:{...n.stats,sovereigntyChecks:n.stats.sovereigntyChecks+1}})),updateEfficiency:n=>l(s=>({...s,stats:{...s.stats,efficiency:n}}))}}const ee=It();function qt(){const a={nodes:[{id:"ln-1",name:"Senegal Node",type:"local",label:"SN",location:"Dakar, Senegal",dataSovereignty:!0,x:150,y:300,connections:["rh-1","ln-2"]},{id:"ln-2",name:"Kenya Node",type:"local",label:"KN",location:"Nairobi, Kenya",dataSovereignty:!0,x:350,y:350,connections:["ln-1","rh-1","ln-3"]},{id:"ln-3",name:"India Node",type:"local",label:"IN",location:"Bengaluru, India",dataSovereignty:!0,x:450,y:200,connections:["ln-2","rh-2"]},{id:"rh-1",name:"Africa Hub",type:"regional",label:"AH",location:"Addis Ababa, Ethiopia",dataSovereignty:!0,x:250,y:200,connections:["ln-1","ln-2","gc-1"]},{id:"rh-2",name:"Asia Hub",type:"regional",label:"AS",location:"Singapore",dataSovereignty:!0,x:550,y:250,connections:["ln-3","gc-1","ln-4"]},{id:"ln-4",name:"Brazil Node",type:"local",label:"BR",location:"São Paulo, Brazil",dataSovereignty:!1,x:200,y:450,connections:["rh-2","ln-5"]},{id:"ln-5",name:"Canada Node",type:"local",label:"CN",location:"Toronto, Canada",dataSovereignty:!0,x:400,y:450,connections:["ln-4","gc-1"]},{id:"gc-1",name:"Global Council",type:"global",label:"GC",location:"Distributed",dataSovereignty:!0,x:350,y:100,connections:["rh-1","rh-2","ln-5"]},{id:"dev-1",name:"Mobile Device",type:"device",label:"MD",location:"Field Location",dataSovereignty:!1,x:150,y:380,connections:["ln-1"]}],connections:[],scenarios:[{id:"basic",name:"Basic Framework Network",description:"Demonstrates the core Digital Commons Framework network with Local Nodes, Regional Hubs, and the Global Council."},{id:"health-data",name:"Health Data Sharing",description:"Shows how health data flows between nodes with sovereignty protocols ensuring sensitive information is properly managed."},{id:"cultural-knowledge",name:"Cultural Knowledge Commons",description:"Illustrates the preservation and sharing of cultural knowledge with Indigenous data sovereignty protocols."},{id:"disaster-response",name:"Disaster Response Network",description:"Demonstrates how the network adapts during emergency situations while maintaining sovereignty principles."}]};a.connections=be(a.nodes);const{subscribe:r,set:d,update:l}=De(a);return{subscribe:r,loadScenario:n=>{l(s=>{let t={...s};switch(n.id){case"health-data":t.nodes=t.nodes.map(v=>({...v,dataSovereignty:["ln-1","ln-2","ln-5","rh-1","gc-1"].includes(v.id)}));break;case"cultural-knowledge":t.nodes=t.nodes.map(v=>({...v,dataSovereignty:["ln-3","ln-5","rh-2","gc-1"].includes(v.id)}));break;case"disaster-response":const u=[...t.nodes];u.find(v=>v.id==="ln-1").connections.push("ln-3"),u.find(v=>v.id==="ln-3").connections.push("ln-1"),t.nodes=u;break;default:t={...a};break}return t.connections=be(t.nodes),t})},addNode:n=>{l(s=>{const t=[...s.nodes,n];return{...s,nodes:t,connections:be(t)}})},updateNode:(n,s)=>{l(t=>{const u=t.nodes.map(v=>v.id===n?{...v,...s}:v);return{...t,nodes:u,connections:be(u)}})}}}function be(a){const r=[],d=new Set;return a.forEach(l=>{(l.connections||[]).forEach(n=>{const s=[l.id,n].sort().join("-");if(!d.has(s)){d.add(s);const t=a.find(u=>u.id===n);t&&r.push({source:l,target:t,type:At(l.type,t.type),bandwidth:Math.floor(Math.random()*100)+20,sovereigntyCheck:l.dataSovereignty||t.dataSovereignty})}})}),r}function At(a,r){return a==="global"||r==="global"?"global":a==="regional"||r==="regional"?"regional":a==="device"||r==="device"?"backup":"main"}const Pe=qt();var Lt=R('<div class="simulator-container svelte-yzupsb"><header class="svelte-yzupsb"><div class="header-content svelte-yzupsb"><h1 class="svelte-yzupsb">Data Flow Simulator</h1> <h2 class="svelte-yzupsb">Digital Commons Framework</h2></div> <button class="help-button svelte-yzupsb">Help</button></header> <div class="main-content svelte-yzupsb"><div class="network-visualization svelte-yzupsb"><svg><!><!><!></svg> <!> <!></div> <div class="side-panel svelte-yzupsb"><!> <!> <!></div></div> <footer class="svelte-yzupsb"><p>Digital Commons Framework - Data Flow Simulator</p> <p class="footnote svelte-yzupsb">Demonstrating how information flows while preserving community control through data sovereignty protocols</p></footer> <!></div>');function ss(a,r){ae(r,!1);const[d,l]=Ee(),n=()=>ke(ee,"$simulationStore",d),s=()=>ke(Pe,"$networkStore",d),t=z(),u=z();let v=z([]),w=0,m=z(null),g=z(null),f=z(0),x=z(0),p=z(!0);function h(){y(p,!1)}function b(_){var M;y(g,_.id===((M=e(g))==null?void 0:M.id)?null:_)}function S(_){y(m,_)}function N(_,M,I){const G=e(u).nodes.find(J=>J.id===_),O=e(u).nodes.find(J=>J.id===M);if(!G||!O)return;if(!Ct({data:I},G,O,e(t).sovereigntyMode)){console.log("Transfer blocked by sovereignty rules");return}const de={id:w++,source:_,destination:M,data:I,progress:0,path:E(_,M),sovereigntyChecks:[],verified:!1};y(v,[...e(v),de]),setTimeout(()=>{I.sovereignty&&e(t).sovereigntyMode&&(y(v,e(v).map(J=>J.id===de.id?Dt(J,e(t).sovereigntyMode):J)),ee.incrementSovereigntyChecks())},e(t).packetSpeed*500),ee.incrementTransfers(),setTimeout(()=>{var J;y(v,e(v).filter(qe=>qe.id!==de.id)),((J=e(m))==null?void 0:J.id)===de.id&&y(m,null)},e(t).packetSpeed*1e3)}function E(_,M){let I=e(u).connections.find(O=>O.source.id===_&&O.target.id===M||O.source.id===M&&O.target.id===_);if(I)return I;const G=e(u).nodes.find(O=>O.id===_);if(G&&G.connections.length>0){const O=G.connections[0];return e(u).connections.find(ve=>ve.source.id===_&&ve.target.id===O||ve.source.id===O&&ve.target.id===_)}return e(u).connections[0]}function q(_){const M=_.detail;Pe.loadScenario(M),ee.reset(),y(v,[]),y(g,null),y(m,null)}function C(_){const{action:M,value:I}=_.detail;switch(M){case"start":ee.start();break;case"pause":ee.pause();break;case"reset":ee.reset(),y(v,[]),y(m,null);break;case"speed":ee.setSpeed(I);break;case"sovereignty":ee.setSovereigntyMode(I),y(v,[]),y(m,null);break}}je(()=>{const _=setInterval(()=>{if(!e(t).running)return;if(y(v,e(v).map(I=>({...I,progress:Math.min(1,I.progress+.01*e(t).speed)}))),Math.random()<.05*e(t).speed){const I=Math.floor(Math.random()*e(u).nodes.length);let G;do G=Math.floor(Math.random()*e(u).nodes.length);while(G===I);const O=e(u).nodes[I].id,ve=e(u).nodes[G].id,de=["Health","Climate","Education","Cultural"],J={type:de[Math.floor(Math.random()*de.length)],size:Math.floor(Math.random()*50)+10,sovereignty:Math.random()<.7};N(O,ve,J)}const M=Mt(e(v),e(t).sovereigntyMode);ee.updateEfficiency(M)},50);return()=>clearInterval(_)}),H(()=>n(),()=>{y(t,n())}),H(()=>s(),()=>{y(u,s())}),me(),ie();var k=Lt(),j=o(k),P=c(o(j),2);i(j);var K=c(j,2),V=o(K),Y=o(V),Q=o(Y);se(Q,1,()=>e(u).connections,le,(_,M)=>{ot(_,{get connection(){return e(M)}})});var X=c(Q);se(X,1,()=>e(u).nodes,le,(_,M)=>{const I=ue(()=>{var G;return((G=e(g))==null?void 0:G.id)===e(M).id});Qe(_,{get node(){return e(M)},get isSelected(){return e(I)},$$events:{click:()=>b(e(M))}})});var B=c(X);se(B,1,()=>e(v),_=>_.id,(_,M)=>{const I=ue(()=>{var G;return((G=e(m))==null?void 0:G.id)===e(M).id});at(_,{get packet(){return e(M)},get sovereigntyMode(){return e(t).sovereigntyMode},get isSelected(){return e(I)},$$events:{click:()=>S(e(M))}})}),i(Y);var A=c(Y,2);St(A);var te=c(A,2);Tt(te,{get active(){return e(t).sovereigntyMode},get packet(){return e(m)}}),i(V);var oe=c(V,2),ge=o(oe);yt(ge,{get scenarios(){return e(u).scenarios},$$events:{change:q}});var re=c(ge,2);vt(re,{get simulation(){return e(t)},$$events:{control:C}});var pe=c(re,2);const fe=ue(()=>({...e(t).stats,transfers:e(t).stats.transfers,sovereigntyChecks:e(t).stats.sovereigntyChecks,efficiency:e(t).stats.efficiency}));ft(pe,{get selectedNode(){return e(g)},get stats(){return e(fe)},get activePackets(){return e(v).length}}),i(oe),i(K);var he=c(K,4);Ht(he,{get show(){return e(p)},$$events:{close:h}}),i(k),L(()=>{$(Y,"width",e(f)*.75),$(Y,"height",e(x)*.7)}),Me("innerWidth",_=>y(f,_)),Me("innerHeight",_=>y(x,_)),U("click",P,()=>y(p,!0)),D(a,k),ne(),l()}export{ss as component};
